@model GeneralStatisticsViewModel
@{
    ViewData["Title"] = SharedResource.generalStatistics + " || GameHub Manager";
}

<style>
    .color-main {
        color: #F7374F !important;
    }

    .color-accent {
        color: #854836 !important;
    }

    .color-deep {
        color: #31511E !important;
    }

    .border-main {
        border-color: #F7374F !important;
    }

    .border-accent {
        border-color: #854836 !important;
    }

    .border-deep {
        border-color: #31511E !important;
    }

    .card-body span.fs-5 {
        font-size: 0.95rem !important;
    }

    .card {
        border-radius: 1rem !important;
    }

    .card-header h5,
    .card-header h6 {
        font-weight: 600;
    }

    .card-header.bg-soft {
        background-color: #f8f9fa;
    }
</style>

<body>
    <div class="container-fluid flex-xxl-grow-1">
        <div class="d-flex justify-content-end my-3 justify-content-center">
            <a asp-controller="Statistics" asp-action="StatisticSelection" class="btn btn-soft-info fs--1">
                <i class="bi bi-arrow-left-circle me-1"></i> @SharedResource.backToHomeScreen
            </a>
        </div>

        <h3 class="text-center text-primary mb-4">@SharedResource.statisticsForCurrentWeek</h3>

        <div class="row g-4 mb-5">
            <div class="col-md-4">
                <div class="card shadow-sm border border-primary rounded-3">
                    <div class="card-header p-3 bg-soft border-bottom border-primary">
                        <h5 class="text-primary mb-0">@SharedResource.totalDailyFund</h5>
                    </div>
                    <div class="card-body p-3">
                        <div class="echart-doughnut-rounded-chart-example" style="min-height: 260px;"></div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card shadow-sm border border-success rounded-3">
                    <div class="card-header p-3 bg-soft border-bottom border-success">
                        <h5 class="text-success mb-0">@SharedResource.snacksSales</h5>
                    </div>
                    <div class="card-body p-3">
                        <div class="echart-doughnut-rounded-chart-example" style="min-height: 260px;"></div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card shadow-sm border border-info rounded-3">
                    <div class="card-header p-3 bg-soft border-bottom border-info">
                        <h5 class="text-info mb-0">@SharedResource.totalReservations</h5>
                    </div>
                    <div class="card-body p-3">
                        <div class="echart-doughnut-rounded-chart-example" style="min-height: 260px;"></div>
                    </div>
                </div>
            </div>
        </div>

        <section class="mb-5">
            <h4 class="text-center color-main mb-2">@SharedResource.salesDepartment</h4>
            <div class="row">
                <div class="col-md-6 border-end">
                    <h5 class="text-center color-accent mb-3">@SharedResource.paidAmounts</h5>
                    <div class="card text-center shadow-sm border border-accent mb-3">
                        <div class="card-header bg-accent-soft p-3 border-bottom border-accent">
                            <h5 class="color-accent mb-0">@SharedResource.totalSalesInCurrentMonth</h5>
                        </div>
                        <div class="card-body">
                            <h3 class="color-accent">@Model.TotalWeeklyPaidSales.ToString("N0")</h3>
                        </div>
                    </div>
                    <div class="row g-3 justify-content-center">
                        @foreach (var item in Model.WeeklyPaidSalesByType)
                        {
                            <div class="col-md-6 justify-content-center">
                                <div class="card shadow-sm border border-300 text-center">
                                    <div class="card-header bg-accent-soft p-2 border-bottom border-300">
                                        <h6 class="mb-0">@item.TypeName</h6>
                                    </div>
                                    <div class="card-body p-3">
                                        <span class="fs-5">@item.Total.ToString("N0")</span>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                    <div class="mt-4">
                        <div class="card text-center shadow-sm border border-deep mb-3">
                            <div class="card-header bg-main-soft p-3 border-bottom border-deep">
                                <h5 class="color-deep mb-0">@SharedResource.totalSalesToday</h5>
                            </div>
                            <div class="card-body">
                                <h3 class="color-deep">@Model.TotalDailyPaidSales.ToString("N0")</h3>
                            </div>
                        </div>
                        <div class="row g-3 justify-content-center">
                            @foreach (var item in Model.DailyPaidSalesByType)
                            {
                                <div class="col-md-6 justify-content-center">
                                    <div class="card shadow-sm border border-300 text-center">
                                        <div class="card-header bg-accent-soft p-2 border-bottom border-300">
                                            <h6 class="mb-0">@item.TypeName</h6>
                                        </div>
                                        <div class="card-body p-3">
                                            <span class="fs-5">@item.Total.ToString("N0")</span>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <h5 class="text-center color-accent mb-3">@SharedResource.AmountDue</h5>
                    <div class="card text-center shadow-sm border border-accent mb-3">
                        <div class="card-header bg-deep-soft p-3 border-bottom border-accent">
                            <h5 class="color-accent mb-0">@SharedResource.totalAmountDueForTheWeek</h5>
                        </div>
                        <div class="card-body">
                            <h3 class="color-accent">@Model.TotalWeeklyDueSales.ToString("N0")</h3>
                        </div>
                    </div>
                    <div class="row g-3 justify-content-center">
                        @foreach (var item in Model.WeeklyDueSalesByType)
                        {
                            <div class="col-md-6 justify-content-center">
                                <div class="card shadow-sm border border-300 text-center">
                                    <div class="card-header bg-deep-soft p-2 border-bottom border-300">
                                        <h6 class="mb-0">@item.TypeName</h6>
                                    </div>
                                    <div class="card-body p-3">
                                        <span class="fs-5">@item.Total.ToString("N0")</span>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                    <div class="mt-4">
                        <div class="card text-center shadow-sm border border-deep mb-3">
                            <div class="card-header bg-main-soft p-3 border-bottom border-deep">
                                <h5 class="color-deep mb-0">@SharedResource.totalAmountDueForTheDay</h5>
                            </div>
                            <div class="card-body">
                                <h3 class="color-deep">@Model.TotalDailyDueSales.ToString("N0")</h3>
                            </div>
                        </div>
                        <div class="row g-3 justify-content-center">
                            @foreach (var item in Model.DailyDueSalesByType)
                            {
                                <div class="col-md-6 justify-content-center">
                                    <div class="card shadow-sm border border-300 text-center">
                                        <div class="card-header bg-deep-soft p-2 border-bottom border-300">
                                            <h6 class="mb-0">@item.TypeName</h6>
                                        </div>
                                        <div class="card-body p-3">
                                            <span class="fs-5">@item.Total.ToString("N0")</span>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-5">
            <h4 class="text-center color-main mb-2">@SharedResource.reservationsDepartment</h4>
            <div class="row">
                <div class="col-md-6 border-end">
                    <h5 class="text-center color-accent mb-3">@SharedResource.paidAmounts</h5>
                    <div class="card text-center shadow-sm border border-accent mb-3">
                        <div class="card-header bg-accent-soft p-3 border-bottom border-accent">
                            <h5 class="color-accent mb-0">@SharedResource.totalReservationsForTheWeek</h5>
                        </div>
                        <div class="card-body">
                            <h3 class="color-accent">@Model.TotalWeeklyPaidReservations.ToString("N0")</h3>
                        </div>
                    </div>
                    <div class="row g-3 justify-content-center">
                        @foreach (var item in Model.WeeklyPaidReservationsByDevice)
                        {
                            <div class="col-md-6 justify-content-center">
                                <div class="card shadow-sm border border-300 text-center">
                                    <div class="card-header bg-accent-soft p-2 border-bottom border-300">
                                        <h6 class="mb-0">@item.TypeName</h6>
                                    </div>
                                    <div class="card-body p-3">
                                        <span class="fs-5">@item.Total.ToString("N0")</span>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                    <div class="mt-4">
                        <div class="card text-center shadow-sm border border-deep mb-3">
                            <div class="card-header bg-main-soft p-3 border-bottom border-deep">
                                <h5 class="color-deep mb-0">@SharedResource.totalReservationsForTheDay</h5>
                            </div>
                            <div class="card-body">
                                <h3 class="color-deep">@Model.TotalDailyPaidReservations.ToString("N0")</h3>
                            </div>
                        </div>
                        <div class="row g-3 justify-content-center">
                            @foreach (var item in Model.DailyPaidReservationsByDevice)
                            {
                                <div class="col-md-6 justify-content-center">
                                    <div class="card shadow-sm border border-300 text-center">
                                        <div class="card-header bg-accent-soft p-2 border-bottom border-300">
                                            <h6 class="mb-0">@item.TypeName</h6>
                                        </div>
                                        <div class="card-body p-3">
                                            <span class="fs-5">@item.Total.ToString("N0")</span>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <h5 class="text-center color-accent mb-3">@SharedResource.AmountDue</h5>
                    <div class="card text-center shadow-sm border border-accent mb-3">
                        <div class="card-header bg-deep-soft p-3 border-bottom border-accent">
                            <h5 class="color-accent mb-0">@SharedResource.totalDueReservationsForWeek</h5>
                        </div>
                        <div class="card-body">
                            <h3 class="color-accent">@Model.TotalWeeklyDueReservations.ToString("N0")</h3>
                        </div>
                    </div>
                    <div class="row g-3 justify-content-center">
                        @foreach (var item in Model.WeeklyDueReservationsByDevice)
                        {
                            <div class="col-md-6">
                                <div class="card shadow-sm border border-300 text-center">
                                    <div class="card-header bg-deep-soft p-2 border-bottom border-300">
                                        <h6 class="mb-0">@item.TypeName</h6>
                                    </div>
                                    <div class="card-body p-3">
                                        <span class="fs-5">@item.Total.ToString("N0")</span>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                    <div class="mt-4">
                        <div class="card text-center shadow-sm border border-deep mb-3">
                            <div class="card-header bg-main-soft p-3 border-bottom border-deep">
                                <h5 class="color-deep mb-0">@SharedResource.totalDueReservationsForTheDay</h5>
                            </div>
                            <div class="card-body">
                                <h3 class="color-deep">@Model.TotalDailyDueReservations.ToString("N0")</h3>
                            </div>
                        </div>
                        <div class="row g-3 justify-content-center">
                            @foreach (var item in Model.DailyDueReservationsByDevice)
                            {
                                <div class="col-md-6">
                                    <div class="card shadow-sm border border-300 text-center">
                                        <div class="card-header bg-deep-soft p-2 border-bottom border-300">
                                            <h6 class="mb-0">@item.TypeName</h6>
                                        </div>
                                        <div class="card-body p-3">
                                            <span class="fs-5">@item.Total.ToString("N0")</span>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>

</body>

    <script>
         document.addEventListener("DOMContentLoaded", function () {
            doughnutRoundedChartInit();
        });

        const snaksData = [
        @for (int i = 0; i < Model.SalesByDay.Count; i++)
        {
            var item = Model.SalesByDay[i];
            <text>
                            { value: @item.Total, name: @Html.Raw(Json.Serialize(item.DayName)), itemStyle: { color: '#@(String.Format("{0:X6}", (item.Date.Day * 1234567 + i * 99) % 0xFFFFFF))' } }@((i < Model.SalesByDay.Count - 1) ? "," : "")
            </text>
        }
        ];

         const reservationssData = [
        @for (int i = 0; i < Model.ReservationsByDay.Count; i++)
        {
            var item = Model.ReservationsByDay[i];
            <text>
                                    { value: @item.Total, name: @Html.Raw(Json.Serialize(item.DayName)), itemStyle: { color: '#@(String.Format("{0:X6}", (item.Date.Day * 1234567 + i * 88) % 0xFFFFFF))' } }@((i < Model.ReservationsByDay.Count - 1) ? "," : "")
            </text>
        }
        ];
        const totalFundData = [
        @for (int i = 0; i < Model.TotalFundByDay.Count; i++)
        {
            var item = Model.TotalFundByDay[i];
            <text>
                                                { value: @item.Total, name: @Html.Raw(Json.Serialize(item.DayName)), itemStyle: { color: '#@(String.Format("{0:X6}", (item.Date.Day * 1234567 + i * 115) % 0xFFFFFF))' } }@((i < Model.TotalFundByDay.Count - 1) ? "," : "")
            </text>
        }
        ];

                function getChartDataByIndex(index) {
            switch (index) {
                case 0:
                    return totalFundData;
                case 1:
                    return snaksData;
                case 2:
                    return reservationssData;
                default:
                    return [];
            }
        }


    </script>
